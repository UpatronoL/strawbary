{% extends 'base.html' %}
 
{% block title %}
  <span data-i18n="nav-summary">Summary Measurements</span>
{% endblock %}
 
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='summary-table.css') }}">
<style>
  table {
    table-layout: fixed;
    width: 100%;
  }
  th:nth-child(1) { width: 15%; }
  th:nth-child(2) { width: 10%; }
</style>
{% endblock %}
 
{% block content %}
<div class="container">
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th data-i18n="category">Category</th>
          <th data-i18n="metric">Metric</th>
          {% for day in summary %}
            <th>{{ day['Date'].strftime('%b %d') if day['Date'] else '' }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        <tr>
          <td rowspan="5" data-i18n="Temperature">Temperature</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Temp'] is not none and "%.1f"|format(day['Daily Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Temp'] is not none and "%.1f"|format(day['Daytime Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Temp'] is not none and "%.1f"|format(day['Nighttime Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <tr>
          <td rowspan="5" data-i18n="Soil Temp">Soil Temp</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Soil Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Soil Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Soil Temp'] is not none and "%.1f"|format(day['Daily Avg Soil Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Soil Temp'] is not none and "%.1f"|format(day['Daytime Avg Soil Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Soil Temp'] is not none and "%.1f"|format(day['Nighttime Avg Soil Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>

        <tr>
          <td rowspan="5" data-i18n="Humidity">Humidity</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Humidity'] is not none and "%.1f"|format(day['Daily Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Humidity'] is not none and "%.1f"|format(day['Daytime Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Humidity'] is not none and "%.1f"|format(day['Nighttime Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <tr>
          <td rowspan="5" data-i18n="Soil Humidity">Soil Humidity</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Soil Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Soil Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Soil Humidity'] is not none and "%.1f"|format(day['Daily Avg Soil Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Soil Humidity'] is not none and "%.1f"|format(day['Daytime Avg Soil Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Soil Humidity'] is not none and "%.1f"|format(day['Nighttime Avg Soil Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>

        <tr>
          <td rowspan="2" data-i18n="Light Intensity">Light Intensity</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Light Intensity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Light Intensity'] is not none and "%.1f"|format(day['Daily Avg Light Intensity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // This ensures that the language is applied after page content is loaded
  document.addEventListener('DOMContentLoaded', () => {
    // Force language update on this page
    const savedLang = localStorage.getItem('preferredLanguage') || 'en';
    if (window.setLanguage) {
      window.setLanguage(savedLang);
    }
  });
</script>
{% endblock %}