{% extends 'base.html' %}
 
{% block title %}
  <span data-i18n="title">Summary Measurements</span>
{% endblock %}
 
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='summary-table.css') }}">
<style>
  table {
    table-layout: fixed;
    width: 100%;
  }
  th:nth-child(1) { width: 15%; }
  th:nth-child(2) { width: 10%; }
</style>
{% endblock %}
 
{% block content %}
<div class="container">
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th data-i18n="category">Category</th>
          <th data-i18n="metric">Metric</th>
          {% for day in summary %}
            <th>{{ day['Date'].strftime('%b %d') if day['Date'] else '' }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        <!-- Temperature -->
        <tr>
          <td data-i18n="categories.temperature" rowspan="5">Temperature (°C)</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Temp'] is not none and "%.1f"|format(day['Daily Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Temp'] is not none and "%.1f"|format(day['Daytime Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Temp'] is not none and "%.1f"|format(day['Nighttime Avg Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <!-- Humidity -->
        <tr>
          <td data-i18n="categories.humidity" rowspan="5">Humidity (%)</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Humidity'] is not none and "%.1f"|format(day['Daily Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Humidity'] is not none and "%.1f"|format(day['Daytime Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Humidity'] is not none and "%.1f"|format(day['Nighttime Avg Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <!-- Light Intensity -->
        <tr>
          <td data-i18n="categories.light" rowspan="2">Light Intensity</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Light Intensity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Light Intensity'] is not none and "%.1f"|format(day['Daily Avg Light Intensity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <!-- Ground Temperature -->
        <tr>
          <td data-i18n="categories.groundTemp" rowspan="5">Ground Temperature (°C)</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Ground Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Ground Temp'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Ground Temp'] is not none and "%.1f"|format(day['Daily Avg Ground Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Ground Temp'] is not none and "%.1f"|format(day['Daytime Avg Ground Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Ground Temp'] is not none and "%.1f"|format(day['Nighttime Avg Ground Temp']) or "N/A" }}</td>
          {% endfor %}
        </tr>
 
        <!-- Ground Humidity -->
        <tr>
          <td data-i18n="categories.groundHumidity" rowspan="5">Ground Humidity (%)</td>
          <td data-i18n="metrics.max">Max</td>
          {% for day in summary %}
            <td>{{ day['Max Ground Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.min">Min</td>
          {% for day in summary %}
            <td>{{ day['Min Ground Humidity'] or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.dailyAvg">Daily Avg</td>
          {% for day in summary %}
            <td>{{ day['Daily Avg Ground Humidity'] is not none and "%.1f"|format(day['Daily Avg Ground Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.daytimeAvg">Daytime Avg</td>
          {% for day in summary %}
            <td>{{ day['Daytime Avg Ground Humidity'] is not none and "%.1f"|format(day['Daytime Avg Ground Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td data-i18n="metrics.nighttimeAvg">Nighttime Avg</td>
          {% for day in summary %}
            <td>{{ day['Nighttime Avg Ground Humidity'] is not none and "%.1f"|format(day['Nighttime Avg Ground Humidity']) or "N/A" }}</td>
          {% endfor %}
        </tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // This ensures that the language is applied after page content is loaded
  document.addEventListener('DOMContentLoaded', () => {
    // Force language update on this page
    const savedLang = localStorage.getItem('preferredLanguage') || 'en';
    if (window.setLanguage) {
      window.setLanguage(savedLang);
    }
  });
</script>
{% endblock %}